<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‹¤ìš´ë¡œë“œ ì™„ë£Œ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        .qr-box {
            margin: 30px auto;
            padding: 15px;
            border: 3px solid #007bff;
            display: inline-block;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ‰ AI ë³€í™˜ ì™„ë£Œ!</h2>

    <div id="qrcode" class="qr-box"></div>
    <p class="status-text note">ëª¨ë°”ì¼ë¡œ ìœ„ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì¦‰ì‹œ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.</p>

    <img id="finalImage" alt="AI ë³€í™˜ ê²°ê³¼ ì´ë¯¸ì§€" class="preview-img" style="display: none;">

    <a id="downloadLink" class="btn download-link" **download="my_ai_art.png"** href="#">
        â¬‡ï¸ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ (PC ë‹¤ìš´ë¡œë“œìš©)
    </a>

    <a href="index.html" class="btn go-back-btn">
        â†©ï¸ ë‹¤ì‹œ ë³€í™˜í•˜ê¸°
    </a>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const aiImageUrl = urlParams.get('url');

        if (aiImageUrl) {
            const decodedUrl = decodeURIComponent(aiImageUrl);

            // 1. ë‹¤ìš´ë¡œë“œ ë§í¬ ì„¤ì •
            const downloadLink = document.getElementById('downloadLink');
            downloadLink.href = decodedUrl;

            // 2. **[í•µì‹¬ ë³µêµ¬ ë¡œì§]** URLì„ QR ì½”ë“œë¡œ ìƒì„±
            new QRCode(document.getElementById("qrcode"), {
                text: decodedUrl, // AI ì´ë¯¸ì§€ URLì„ QR ì½”ë“œë¡œ ë³€í™˜
                width: 200,
                height: 200,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });

            // (ì„ íƒ ì‚¬í•­: ì´ë¯¸ì§€ë¥¼ í˜ì´ì§€ì— í‘œì‹œí•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ì£¼ì„ì„ í•´ì œ)
            // document.getElementById('finalImage').src = decodedUrl;
            // document.getElementById('finalImage').style.display = 'block';

        } else {
            alert('ì´ë¯¸ì§€ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ì›ë³¸ í˜ì´ì§€ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.');
            window.location.href = 'index.html';
        }
    });
</script>
</body>
</html>